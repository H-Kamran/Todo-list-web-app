import React, { useEffect, useState } from "react";

function DarkModeToggle() {
  const [isDark, setIsDark] = useState(() => {
    const stored = localStorage.getItem("theme");
    return stored
      ? stored === "dark"
      : window.matchMedia("(prefers-color-scheme: dark)").matches;
    // window.matchMedia("(prefers-color-scheme: dark)").matches
  });

  useEffect(() => {
    document.documentElement.classList.toggle("dark", isDark);
    localStorage.setItem("theme", isDark ? "dark" : "light");
  }, [isDark]);

  return (
    // <button onClick={() => setIsDark((prev) => !prev)}>
    //   {isDark ? "â˜€ Light Mode" : "ðŸŒ™ Dark Mode"}
    // </button>
    <button
      onClick={() => setIsDark((prev) => !prev)}
      className="darkmode-button"
      type="button"
    >
      {/* <img src={moon} /> */}
      {isDark ? (
        <svg viewBox="0 0 512 512" width="24" height="24">
          <g
            transform="translate(0.000000,512.000000) scale(0.100000,-0.100000)"
            fill="var(--secondary-color-c)"
            stroke="none"
          >
            <path
              d="M2495 5106 c-39 -18 -70 -48 -92 -89 -16 -29 -18 -65 -18 -339 l0
-306 30 -43 c37 -52 86 -79 145 -79 59 0 108 27 145 79 l30 43 0 306 c0 302 0
308 -23 347 -44 78 -145 115 -217 81z"
            />
            <path
              d="M792 4399 c-95 -47 -123 -156 -64 -251 11 -18 110 -121 219 -229 147
-145 208 -199 236 -208 136 -45 267 92 217 226 -16 41 -416 441 -465 464 -52
24 -90 24 -143 -2z"
            />
            <path
              d="M4185 4401 c-49 -23 -449 -424 -465 -464 -24 -65 -5 -141 46 -189 50
-47 96 -57 169 -37 31 9 79 50 238 208 109 108 210 215 224 238 85 144 -64
316 -212 244z"
            />
            <path
              d="M2440 3840 c-611 -55 -1102 -551 -1160 -1172 -41 -453 183 -918 567
-1174 543 -361 1262 -265 1679 224 186 218 288 457 313 734 65 699 -462 1322
-1174 1388 -60 5 -117 9 -125 9 -8 -1 -53 -5 -100 -9z m383 -384 c316 -95 536
-314 634 -633 25 -81 27 -101 27 -263 0 -162 -2 -182 -27 -263 -51 -166 -134
-304 -248 -413 -110 -104 -230 -173 -386 -221 -81 -25 -101 -27 -263 -27 -162
0 -182 2 -263 27 -319 98 -536 315 -634 634 -25 81 -27 101 -27 263 0 162 2
182 27 263 106 345 353 572 708 652 45 10 108 14 214 11 127 -3 164 -8 238
-30z"
            />
            <path
              d="M144 2731 c-17 -4 -44 -16 -60 -25 -112 -66 -104 -244 13 -302 35
-17 63 -19 345 -19 l306 0 43 30 c52 37 79 86 79 145 0 59 -27 108 -79 145
l-43 30 -286 2 c-158 1 -301 -2 -318 -6z"
            />
            <path
              d="M4383 2731 c-77 -19 -133 -92 -133 -173 0 -57 27 -106 79 -143 l43
-30 306 0 c302 0 308 0 347 23 61 35 90 84 90 152 0 68 -29 117 -90 152 -39
22 -47 23 -325 25 -157 1 -300 -2 -317 -6z"
            />
            <path
              d="M1181 1408 c-42 -12 -419 -379 -458 -445 -62 -106 -1 -240 120 -260
73 -12 99 7 326 231 117 116 219 225 227 243 27 63 14 135 -34 187 -49 52
-107 66 -181 44z"
            />
            <path
              d="M3800 1398 c-77 -39 -114 -121 -90 -201 10 -34 50 -81 218 -251 254
-256 289 -276 392 -224 77 39 114 121 90 201 -10 34 -50 81 -218 251 -254 256
-289 276 -392 224z"
            />
            <path
              d="M2480 851 c-19 -10 -48 -37 -65 -60 l-30 -43 0 -306 c0 -302 0 -308
23 -347 35 -61 84 -90 152 -90 68 0 117 29 152 90 23 39 23 45 23 347 l0 306
-30 43 c-37 52 -86 79 -145 79 -25 0 -61 -8 -80 -19z"
            />
          </g>
        </svg>
      ) : (
        <svg viewBox="0 0 512 512" width="24" height="24">
          <g
            transform="translate(0.000000,512.000000) scale(0.100000,-0.100000)"
            fill="var(--secondary-color-c)"
            stroke="none"
          >
            <path
              d="M1719 4922 c-307 -123 -565 -290 -803 -522 -473 -460 -728 -1032
    -753 -1690 -32 -858 389 -1669 1113 -2146 864 -570 2005 -532 2839 95 114 86
    318 280 410 391 164 198 304 436 400 680 51 132 43 194 -36 253 -46 33 -94 32
    -219 -6 -226 -68 -417 -97 -652 -97 -471 0 -915 151 -1303 443 -103 78 -314
    289 -392 392 -294 391 -443 829 -443 1308 0 231 29 422 97 647 38 125 39 174
    6 219 -60 79 -127 88 -264 33z m-125 -479 c-39 -207 -43 -551 -9 -773 115
    -748 540 -1384 1179 -1763 501 -296 1104 -409 1674 -313 39 7 72 10 72 6 0
    -15 -96 -167 -163 -257 -467 -628 -1256 -953 -2031 -838 -775 115 -1427 643
    -1700 1378 -299 803 -86 1714 538 2304 54 51 135 121 181 155 81 60 250 168
    265 168 4 0 1 -30 -6 -67z"
            />
          </g>
        </svg>
      )}
    </button>
  );
}

export default DarkModeToggle;
